<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Troubleshooting :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/continuous-delivery/v0.11/en/troubleshooting.html">
    <link rel="prev" href="ref-bundle.html">
    <link rel="next" href="v0.10.0.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/search.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../_/css/vendor/light.css">
<!-- <script src="/docserv/res/lightheaded/analytics.js"
        type="text/javascript"></script> -->
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a class=" navbar-logo" href="https://documentation.suse.com/" aria-label="SUSE Documentation Home"><img class="logo"
            src="../../../_/img/logo.svg" alt="SUSE logo"/></a>
      </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">
            <img src="../../../_/img/resources.png" class="langIcon Resurces" alt="Resources" title="Resources">
          </div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/rancher/fleet-product-docs"><i class="fab fa-github"></i>&nbsp;Continuous Delivery</a>
            <div class="has-submenu">
              <a class="navbar-item" href="#" ><i class="fas fa-file-alt"></i>&nbsp;Report Issue &nbsp;<i class="fas fa-chevron-right"></i></a>
              <div class="submenu">
                <a class="navbar-item" href="https://scc.suse.com">SCC (Recommended)</a>
                <a class="navbar-item" href="https://github.com/rancher/fleet-product-docs/issues">GitHub Issue</a>
              </div>
            </div>
            <a class="navbar-item" href="https://github.com/rancher/product-docs-playbook/blob/main/CONTRIBUTING.md"><i class="fas fa-user-edit"></i>&nbsp;Contribute</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link"><img src="../../../_/img/language.png" class="langIcon Language" alt="Language"
              title="Language"></div>
          <div class="navbar-dropdown">
            <!--  </div><div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
              <a role="button" class="navbar-item" id="en" onclick="selectLanguage(this.id)">
                <!--<img src="../../../_/img/engFlag.svg" class="langIcon english">-->
                &nbsp;English
              </a>
            <!-- LANGUAGESELECTOR -->
          </div>
        </div>
        <!--
        <div class="navbar-item">
          <a href="https://twitter.com/SUSE">
            <img alt="X-logo" class="x-logo" src="../../../_/img/x-logo-white.png">
          </a>
        </div>
        -->
      </div>
    </div>

    <!--   <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div> -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="continuous-delivery" data-version="v0.10">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Continuous Delivery</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart.html">Quickstart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tut-deployment.html">Creating a Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="uninstall.html">Uninstall</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Explanations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="concepts.html">Core Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-bundle-stages.html">Bundle Lifecycle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gitrepo-content.html">Git Repository Contents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="namespaces.html">Namespaces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resources-during-deployment.html">Custom Resources During Deployment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">How-tos for Operators</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation.html">Installation Details</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cluster-registration.html">Register Downstream Clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cluster-group.html">Create Cluster Groups</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="multi-user.html">Setup Multi User</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">How-tos for Users</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gitrepo-add.html">Create a GitRepo Resource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="gitrepo-targets.html">Mapping to Downstream Clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bundle-diffs.html">Generating Diffs to Ignore Modified GitRepos</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="webhook.html">Using Webhooks Instead of Polling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="imagescan.html">Using Image Scan to Update Container Image References</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bundle-add.html">Create a Bundle Resource</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">CLI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-agent/fleet-agent.html">fleet-agent</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-agent/fleet-agent_clusterstatus.html">fleet-agent clusterstatus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-agent/fleet-agent_register.html">fleet-agent register</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-cli/fleet.html">fleet</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-cli/fleet_apply.html">fleet apply</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-cli/fleet_cleanup.html">fleet cleanup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-cli/fleet_deploy.html">fleet deploy</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-cli/fleet_target.html">fleet target</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-cli/fleet_test.html">fleet test</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-controller/fleetcontroller.html">fleetcontroller</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-controller/fleetcontroller_agentmanagement.html">fleetcontroller agentmanagement</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cli/fleet-controller/fleetcontroller_cleanup.html">fleetcontroller cleanup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-status-fields.html">Cluster and Bundle State</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="resources-list.html">Resources List</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-registration.html">Cluster Registration Internals</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-resources.html">List of Deployed Resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-crds.html">Custom Resources Spec</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-fleet-yaml.html">fleet.yaml</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-gitrepo.html">GitRepo Resource</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ref-bundle.html">Bundle Resource</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Changelog</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="v0.10.0.html">v0.10.0</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Continuous Delivery</span>
    <span class="version">0.10</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../cluster-api/v0.16/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../v0.11/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../v0.11/en/index.html">0.11</a>
            </li>
            <li class="version is-current">
              <a href="index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../os-manager/1.6/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../policy-manager/1.22/en/introduction.html">Policy Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../policy-manager/1.22/en/introduction.html">1.22-next</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.21/en/introduction.html">1.21</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.20/en/introduction.html">1.20</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.19/en/introduction.html">1.19</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.18/en/introduction.html">1.18</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.17/en/introduction.html">1.17</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.16/en/introduction.html">1.16</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../storage/1.9.0/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../storage/1.9.0/en/longhorn-documentation.html">1.9.0 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.8.0/en/longhorn-documentation.html">1.8.0 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.7.0/en/longhorn-documentation.html">1.7.0</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../virtualization/v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../virtualization/v1.5/en/introduction/overview.html">v1.5 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../virtualization/v1.4/en/introduction/overview.html">v1.4 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../virtualization/v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html" aria-label="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Continuous Delivery</a></li>
    <li><a href="troubleshooting.html">Troubleshooting</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.10</button>
  <div class="version-menu">
    <a class="version" href="../../v0.11/en/troubleshooting.html">0.11</a>
    <a class="version is-current" href="troubleshooting.html">0.10</a>
    <a class="version" href="../../v0.9/en/troubleshooting.html">0.9</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/fleet-product-docs/edit/main/versions/v0.10/modules/en/pages/troubleshooting.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Troubleshooting</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section contains commands and tips to troubleshootSUSE® Rancher Prime Continuous Delivery.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_do_i"><a class="anchor" href="#_how_do_i"></a><strong>How Do I&#8230;&#8203;</strong></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_fetch_the_log_from_fleet_controller"><a class="anchor" href="#_fetch_the_log_from_fleet_controller"></a>Fetch the log from <code>fleet-controller</code>?</h3>
<div class="paragraph">
<p>In the local management cluster where the <code>fleet-controller</code> is deployed, run the following command with your specific <code>fleet-controller</code> pod name filled in:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kubectl logs -l app=fleet-controller -n cattle-fleet-system</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_fetch_the_log_from_the_fleet_agent"><a class="anchor" href="#_fetch_the_log_from_the_fleet_agent"></a>Fetch the log from the <code>fleet-agent</code>?</h3>
<div class="paragraph">
<p>Go to each downstream cluster and run the following command for the local cluster with your specific <code>fleet-agent</code> pod name filled in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Downstream cluster
$ kubectl logs -l app=fleet-agent -n cattle-fleet-system
# Local cluster
$ kubectl logs -l app=fleet-agent -n cattle-local-fleet-system</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_fetch_detailed_error_logs_from_gitrepos_and_bundles"><a class="anchor" href="#_fetch_detailed_error_logs_from_gitrepos_and_bundles"></a>Fetch detailed error logs from <code>GitRepos</code> and <code>Bundles</code>?</h3>
<div class="paragraph">
<p>Normally, errors should appear in the Rancher UI. However, if there is not enough information displayed about the error there, you can research further by trying one or more of the following as needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For more information about the bundle, click on <code>bundle</code>, and the YAML mode will be enabled.</p>
</li>
<li>
<p>For more information about the GitRepo, click on <code>GitRepo</code>, then click on <code>View Yaml</code> in the upper right of the screen. After viewing the YAML, check <code>status.conditions</code>; a detailed error message should be displayed here.</p>
</li>
<li>
<p>Check the <code>fleet-controller</code> for synching errors.</p>
</li>
<li>
<p>Check the <code>fleet-agent</code> log in the downstream cluster if you encounter issues when deploying the bundle.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_fetch_detailed_status_from_gitrepos_and_bundles"><a class="anchor" href="#_fetch_detailed_status_from_gitrepos_and_bundles"></a>Fetch detailed status from <code>GitRepos</code> and <code>Bundles</code>?</h3>
<div class="paragraph">
<p>For debugging and bug reports the raw JSON of the resources status fields is most useful.
This can be accessed in the Rancher UI, or through <code>kubectl</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl get bundle -n fleet-local fleet-agent-local -o=jsonpath={.status}
kubectl get gitrepo -n fleet-default gitrepo-name -o=jsonpath={.status}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_a_chart_rendering_error_in_kustomize"><a class="anchor" href="#_check_a_chart_rendering_error_in_kustomize"></a>Check a chart rendering error in <code>Kustomize</code>?</h3>
<div class="paragraph">
<p>Check the <a href="#_fetch_the_log_from_fleet_controller"><code>fleet-controller</code> logs</a> and the <a href="#_fetch_the_log_from_the_fleet_agent"><code>fleet-agent</code> logs</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_check_errors_about_watching_or_checking_out_the_gitrepo_or_about_the_downloaded_helm_repo_in_fleet_yaml"><a class="anchor" href="#_check_errors_about_watching_or_checking_out_the_gitrepo_or_about_the_downloaded_helm_repo_in_fleet_yaml"></a>Check errors about watching or checking out the <code>GitRepo</code>, or about the downloaded Helm repo in <code>fleet.yaml</code>?</h3>
<div class="paragraph">
<p>Check the <code>gitjob-controller</code> logs using the following command with your specific <code>gitjob</code> pod name filled in:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kubectl logs -f $gitjob-pod-name -n cattle-fleet-system</pre>
</div>
</div>
<div class="paragraph">
<p>Note that there are two containers inside the pod: the <code>step-git-source</code> container that clones the git repo, and the <code>fleet</code> container that applies bundles based on the git repo.</p>
</div>
<div class="paragraph">
<p>The pods will usually have images named <code>rancher/tekton-utils</code> with the <code>gitRepo</code> name as a prefix. Check the logs for these Kubernetes job pods in the local management cluster as follows, filling in your specific <code>gitRepoName</code> pod name and namespace:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ kubectl logs -f $gitRepoName-pod-name -n namespace</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_the_status_of_the_fleet_controller"><a class="anchor" href="#_check_the_status_of_the_fleet_controller"></a>Check the status of the <code>fleet-controller</code>?</h3>
<div class="paragraph">
<p>You can check the status of the <code>fleet-controller</code> pods by running the commands below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl -n cattle-fleet-system logs -l app=fleet-controller
kubectl -n cattle-fleet-system get pods -l app=fleet-controller</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME                                READY   STATUS    RESTARTS   AGE
fleet-controller-64f49d756b-n57wq   1/1     Running   0          3m21s</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enable_debug_logging_for_fleet_controller_and_fleet_agent"><a class="anchor" href="#_enable_debug_logging_for_fleet_controller_and_fleet_agent"></a>Enable debug logging for <code>fleet-controller</code> and <code>fleet-agent</code>?</h3>
<div class="paragraph">
<p>Available in Rancher v2.6.3 (SUSE® Rancher Prime Continuous Delivery v0.3.8), the ability to enable debug logging has been added.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to the <strong>Dashboard</strong>, then click on the <strong>local cluster</strong> in the left navigation menu</p>
</li>
<li>
<p>Select <strong>Apps &amp; Marketplace</strong>, then <strong>Installed Apps</strong> from the dropdown</p>
</li>
<li>
<p>From there, you will upgrade the SUSE® Rancher Prime Continuous Delivery chart with the value <code>debug=true</code>. You can also set <code>debugLevel=5</code> if desired.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_solutions_for_other_suse_rancher_prime_continuous_delivery_issues"><a class="anchor" href="#_additional_solutions_for_other_suse_rancher_prime_continuous_delivery_issues"></a><strong>Additional Solutions for Other SUSE® Rancher Prime Continuous Delivery Issues</strong></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_naming_conventions_for_crds"><a class="anchor" href="#_naming_conventions_for_crds"></a>Naming conventions for CRDs</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>For CRD terms like <code>clusters</code> and <code>gitrepos</code>, you must reference the full CRD name. For example, the cluster CRD&#8217;s complete name is <code>cluster.fleet.cattle.io</code>, and the gitrepo CRD&#8217;s complete name is <code>gitrepo.fleet.cattle.io</code>.</p>
</li>
<li>
<p><code>Bundles</code>, which are created from the <code>GitRepo</code>, follow the pattern <code>$gitrepoName-$path</code> in the same workspace/namespace where the <code>GitRepo</code> was created. Note that <code>$path</code> is the path directory in the git repository that contains the <code>bundle</code> (<code>fleet.yaml</code>).</p>
</li>
<li>
<p><code>BundleDeployments</code>, which are created from the <code>bundle</code>, follow the pattern <code>$bundleName-$clusterName</code> in the namespace <code>clusters-$workspace-$cluster-$generateHash</code>. Note that <code>$clusterName</code> is the cluster to which the bundle will be deployed.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_http_secrets_in_github"><a class="anchor" href="#_http_secrets_in_github"></a>HTTP secrets in Github</h3>
<div class="paragraph">
<p>When testing SUSE® Rancher Prime Continuous Delivery with private git repositories, you will notice that HTTP secrets are no longer supported in Github. To work around this issue, follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">personal access token</a> in Github.</p>
</li>
<li>
<p>In Rancher, create an HTTP <a href="https://rancher.com/docs/rancher/v2.6/en/k8s-in-rancher/secrets/">secret</a> with your Github username.</p>
</li>
<li>
<p>Use your token as the secret.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_suse_rancher_prime_continuous_delivery_fails_with_bad_response_code_403"><a class="anchor" href="#_suse_rancher_prime_continuous_delivery_fails_with_bad_response_code_403"></a>SUSE® Rancher Prime Continuous Delivery fails with bad response code: 403</h3>
<div class="paragraph">
<p>If your GitJob returns the error below, the problem may be that SUSE® Rancher Prime Continuous Delivery cannot access the Helm repo you specified in your <a href="ref-fleet-yaml.html" class="xref page"><code>fleet.yaml</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>time="2021-11-04T09:21:24Z" level=fatal msg="bad response code: 403"</pre>
</div>
</div>
<div class="paragraph">
<p>Perform the following steps to assess:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check that your repo is accessible from your dev machine, and that you can download the Helm chart successfully</p>
</li>
<li>
<p>Check that your credentials for the git repo are valid</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_helm_chart_repo_certificate_signed_by_unknown_authority"><a class="anchor" href="#_helm_chart_repo_certificate_signed_by_unknown_authority"></a>Helm chart repo: certificate signed by unknown authority</h3>
<div class="paragraph">
<p>If your GitJob returns the error below, you may have added the wrong certificate chain:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>time="2021-11-11T05:55:08Z" level=fatal msg="Get \"https://helm.intra/virtual-helm/index.yaml\": x509: certificate signed by unknown authority"</pre>
</div>
</div>
<div class="paragraph">
<p>Please verify your certificate with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">context=playground-local
kubectl get secret -n fleet-default helm-repo -o jsonpath="{['data']['cacerts']}" --context $context | base64 -d | openssl x509 -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            7a:1e:df:79:5f:b0:e0:be:49:de:11:5e:d9:9c:a9:71
        Signature Algorithm: sha512WithRSAEncryption
        Issuer: C = CH, O = MY COMPANY, CN = NOP Root CA G3
...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_suse_rancher_prime_continuous_delivery_deployment_stuck_in_modified_state"><a class="anchor" href="#_suse_rancher_prime_continuous_delivery_deployment_stuck_in_modified_state"></a>SUSE® Rancher Prime Continuous Delivery deployment stuck in modified state</h3>
<div class="paragraph">
<p>When you deploy bundles to Fleet, some of the components are modified, and this causes the "modified" flag in the SUSE® Rancher Prime Continuous Delivery environment.</p>
</div>
<div class="paragraph">
<p>To ignore the modified flag for the differences between the Helm install generated by <code>fleet.yaml</code> and the resource in your cluster, add a <code>diff.comparePatches</code> to the <code>fleet.yaml</code> for your Deployment, as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">defaultNamespace: &lt;namespace name&gt;
helm:
  releaseName: &lt;release name&gt;
  repo: &lt;repo name&gt;
  chart: &lt;chart name&gt;
diff:
  comparePatches:
  - apiVersion: apps/v1
    kind: Deployment
    operations:
    - {"op":"remove", "path":"/spec/template/spec/hostNetwork"}
    - {"op":"remove", "path":"/spec/template/spec/nodeSelector"}
    jsonPointers: # jsonPointers allows to ignore diffs at certain json path
    - "/spec/template/spec/priorityClassName"
    - "/spec/template/spec/tolerations"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To determine which operations should be removed, observe the logs from <code>fleet-agent</code> on the target cluster. You should see entries similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">level=error msg="bundle monitoring-monitoring: deployment.apps monitoring/monitoring-monitoring-kube-state-metrics modified {\"spec\":{\"template\":{\"spec\":{\"hostNetwork\":false}}}}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the above log, you can add the following entry to remove the operation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"op":"remove", "path":"/spec/template/spec/hostNetwork"}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gitrepo_or_bundle_stuck_in_modified_state"><a class="anchor" href="#_gitrepo_or_bundle_stuck_in_modified_state"></a><code>GitRepo</code> or <code>Bundle</code> stuck in modified state</h3>
<div class="paragraph">
<p><strong>Modified</strong> means that there is a mismatch between the actual state and the desired state, the source of truth, which lives in the git repository.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check the <a href="bundle-diffs.html" class="xref page">bundle diffs documentation</a> for more information.</p>
</li>
<li>
<p>You can also force update the <code>gitrepo</code> to perform a manual resync. Select <strong>GitRepo</strong> on the left navigation bar, then select <strong>Force Update</strong>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_bundle_has_a_horizontal_pod_autoscaler_hpa_in_modified_state"><a class="anchor" href="#_bundle_has_a_horizontal_pod_autoscaler_hpa_in_modified_state"></a>Bundle has a Horizontal Pod Autoscaler (HPA) in modified state</h3>
<div class="paragraph">
<p>For bundles with an HPA, the expected state is <code>Modified</code>, as the bundle contains fields that differ from the state of the Bundle at deployment - usually <code>ReplicaSet</code>.</p>
</div>
<div class="paragraph">
<p>You must define a patch in the <code>fleet.yaml</code> to ignore this field according to <a href="#_gitrepo_or_bundle_stuck_in_modified_state"><code>GitRepo</code> or <code>Bundle</code> stuck in modified state</a>.</p>
</div>
<div class="paragraph">
<p>Here is an example of such a patch for the deployment <code>nginx</code> in namespace <code>default</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">diff:
  comparePatches:
  - apiVersion: apps/v1
    kind: Deployment
    name: nginx
    namespace: default
    operations:
    - {"op": "remove", "path": "/spec/replicas"}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_what_if_the_cluster_is_unavailable_or_is_in_a_waitcheckin_state"><a class="anchor" href="#_what_if_the_cluster_is_unavailable_or_is_in_a_waitcheckin_state"></a>What if the cluster is unavailable, or is in a <code>WaitCheckIn</code> state?</h3>
<div class="paragraph">
<p>You will need to re-import and restart the registration process: Select <strong>Cluster</strong> on the left navigation bar, then select <strong>Force Update</strong></p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>WaitCheckIn status for Rancher v2.5</strong>:
The cluster will show in <code>WaitCheckIn</code> status because the <code>fleet-controller</code> is attempting to communicate with SUSE® Rancher Prime Continuous Delivery using the Rancher service IP. However, SUSE® Rancher Prime Continuous Delivery must communicate directly with Rancher via the Kubernetes service DNS using service discovery, not through the proxy. For more, see the <a href="https://rancher.com/docs/rancher/v2.5/en/installation/other-installation-methods/behind-proxy/install-rancher/#install-rancher">Rancher docs</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_gitrepo_complains_with_gzip_invalid_header"><a class="anchor" href="#_gitrepo_complains_with_gzip_invalid_header"></a>GitRepo complains with <code>gzip: invalid header</code></h3>
<div class="paragraph">
<p>When you see an error like the one below &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">Error opening a gzip reader for /tmp/getter154967024/archive: gzip: invalid header</code></pre>
</div>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>the content of the helm chart is incorrect. Manually download the chart to your local machine and check the content.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_agent_is_no_longer_registered"><a class="anchor" href="#_agent_is_no_longer_registered"></a>Agent is no longer registered</h3>
<div class="paragraph">
<p>You can force a redeployment of an agent for a given cluster by setting <code>redeployAgentGeneration</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">kubectl patch clusters.fleet.cattle.io -n fleet-local local --type=json -p '[{"op": "add", "path": "/spec/redeployAgentGeneration", "value": -1}]'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_migrate_the_local_cluster_to_the_suse_rancher_prime_continuous_delivery_default_cluster_workspace"><a class="anchor" href="#_migrate_the_local_cluster_to_the_suse_rancher_prime_continuous_delivery_default_cluster_workspace"></a>Migrate the local cluster to the SUSE® Rancher Prime Continuous Delivery default cluster workspace?</h3>
<div class="paragraph">
<p>Users can create new workspaces and move clusters across workspaces.
It&#8217;s currently not possible to move the local cluster from <code>fleet-local</code> to another workspace.</p>
</div>
</div>
<div class="sect2">
<h3 id="_bundle_failed_to_deploy_resource_already_exists_error"><a class="anchor" href="#_bundle_failed_to_deploy_resource_already_exists_error"></a>Bundle failed to deploy: "resource already exists" Error</h3>
<div class="paragraph">
<p>If your bundle encounters the following error message during deployment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">not installed: rendered manifests contain a resource that already
exists. Unable to continue with install: ClusterRole "grafana-clusterrole"
in namespace "" exists and cannot be imported into the current release: invalid
ownership metadata; annotation validation error: key "meta.helm.sh/release-namespace"
must equal "ns-2": current value is "ns-1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This error occurs because a Helm resource with the same <code>releaseName</code> already exists in the cluster. To resolve this issue, you need to change the <code>releaseName</code> of the resource you want to create to avoid the conflict.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="ref-bundle.html">Bundle Resource</a></span>
  <span class="next"><a href="v0.10.0.html">v0.10.0</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
<script src="../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../_/js/vendor/tabs.js"></script>


  </body>
</html>
