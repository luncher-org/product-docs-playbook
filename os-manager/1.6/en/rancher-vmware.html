<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to use SUSE® Rancher Prime OS Manager with Rancher and VMware :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/os-manager/1.6/en/rancher-vmware.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/search.css">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../_/css/vendor/light.css">
<!-- <script src="/docserv/res/lightheaded/analytics.js"
        type="text/javascript"></script> -->
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a class=" navbar-logo" href="https://documentation.suse.com/" aria-label="SUSE Documentation Home"><img class="logo"
            src="../../../_/img/logo.svg" alt="SUSE logo"/></a>
      </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">
            <img src="../../../_/img/resources.png" class="langIcon Resurces" alt="Resources" title="Resources">
          </div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/rancher/elemental-product-docs"><i class="fab fa-github"></i>&nbsp;OS Manager</a>
            <div class="has-submenu">
              <a class="navbar-item" href="#" ><i class="fas fa-file-alt"></i>&nbsp;Report Issue &nbsp;<i class="fas fa-chevron-right"></i></a>
              <div class="submenu">
                <a class="navbar-item" href="https://scc.suse.com">SCC (Recommended)</a>
                <a class="navbar-item" href="https://github.com/rancher/elemental-product-docs/issues">GitHub Issue</a>
              </div>
            </div>
            <a class="navbar-item" href="https://github.com/rancher/product-docs-playbook/blob/main/CONTRIBUTING.md"><i class="fas fa-user-edit"></i>&nbsp;Contribute</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link"><img src="../../../_/img/language.png" class="langIcon Language" alt="Language"
              title="Language"></div>
          <div class="navbar-dropdown">
            <!--  </div><div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
              <a role="button" class="navbar-item" id="en" onclick="selectLanguage(this.id)">
                <!--<img src="../../../_/img/engFlag.svg" class="langIcon english">-->
                &nbsp;English
              </a>
            <!-- LANGUAGESELECTOR -->
          </div>
        </div>
        <!--
        <div class="navbar-item">
          <a href="https://twitter.com/SUSE">
            <img alt="X-logo" class="x-logo" src="../../../_/img/x-logo-white.png">
          </a>
        </div>
        -->
      </div>
    </div>

    <!--   <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div> -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="os-manager" data-version="1.6">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">OS Manager</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Quickstarts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart-ui.html">SUSE® Rancher Prime OS Manager the visual way</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart-cli.html">SUSE® Rancher Prime OS Manager the command line way</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Rancher OS Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="architecture.html">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="authentication.html">Authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plans.html">Plans</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade-lifecycle.html">Upgrade lifecycle</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom-install.html">Customize installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hostname.html">Customize hostname</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="networking-vlans.html">Configure VLANs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="wifi.html">Configure WiFi</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ntp.html">Configure NTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="removable-device-cloudconfig.html">Include cloud-config from removable devices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom-certificate.html">Add custom certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="raspi-disk.html">Install on Raspberry Pi</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Node operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reset.html">Machine reset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="behind-proxy.html">Behind a proxy configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Operator operational tasks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backup.html">Backup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="airgap.html">Airgap install</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="channels.html">Channels</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-restore.html">Restore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-upgrade.html">Upgrade</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="troubleshooting-reset.html">Reset</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cloud-config-reference.html">Cloud-config</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineregistration-reference.html">MachineRegistration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineinventory-reference.html">MachineInventory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineinventoryselector-reference.html">MachineInventorySelector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="machineinventoryselectortemplate-reference.html">MachineInventorySelectorTemplate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managedosimage-reference.html">ManagedOSImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managedosversionchannel-reference.html">ManagedOSVersionChannel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managedosversion-reference.html">ManagedOSVersion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="seedimage-reference.html">SeedImage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cluster-reference.html">Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="operatorchart-reference.html">SUSE® Rancher Prime OS Manager Operator Helm chart</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubernetesversions.html">Kubernetes versions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="smbios.html">Smbios</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hardwarelabels.html">Hardware labels</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="inventory-management.html">Inventory management</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="release-notes.html">Release notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OS Manager</span>
    <span class="version">1.6</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../cluster-api/v0.16/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../continuous-delivery/v0.11/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../k3s/latest/en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../k3s/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-current is-latest">
              <a href="index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../policy-manager/1.22/en/introduction.html">Policy Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../policy-manager/1.22/en/introduction.html">1.22-next</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.21/en/introduction.html">1.21</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.20/en/introduction.html">1.20</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.19/en/introduction.html">1.19</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.18/en/introduction.html">1.18</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.17/en/introduction.html">1.17</a>
            </li>
            <li class="version">
              <a href="../../../policy-manager/1.16/en/introduction.html">1.16</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../storage/1.9.0/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../storage/1.9.0/en/longhorn-documentation.html">1.9.0 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.8.0/en/longhorn-documentation.html">1.8.0 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../storage/1.7.0/en/longhorn-documentation.html">1.7.0</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../virtualization/v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../virtualization/v1.5/en/introduction/overview.html">v1.5 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../virtualization/v1.4/en/introduction/overview.html">v1.4 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../virtualization/v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html" aria-label="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OS Manager</a></li>
    <li><a href="rancher-vmware.html">How to use SUSE® Rancher Prime OS Manager with Rancher and VMware</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.6</button>
  <div class="version-menu">
    <a class="version is-current" href="rancher-vmware.html">1.6</a>
    <a class="version" href="../../1.5/en/rancher-vmware.html">1.5</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/rancher/elemental-product-docs/edit/main/docs/1.6/modules/en/pages/rancher-vmware.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">How to use SUSE® Rancher Prime OS Manager with Rancher and VMware</h1>
<div class="sect1">
<h2 id="_excerpt"><a class="anchor" href="#_excerpt"></a>Excerpt</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this document we will see how we can enable elemental support in Rancher and then build iso and test it on a vm in VMware mimicking it for an edge device.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Rancher 2.7 or higher installed and running.</p>
</li>
<li>
<p>One Linux machine with docker installed.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_part_1_rancher_configuration"><a class="anchor" href="#_part_1_rancher_configuration"></a>Part 1: Rancher Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_1_1_enable_the_extensions_under_rancher_configurations_menu"><a class="anchor" href="#_1_1_enable_the_extensions_under_rancher_configurations_menu"></a>1.1 Enable the extensions under Rancher configurations menu</h3>
<div class="paragraph">
<p>Click on extensions under the configuration menu and enable it by hitting enable.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-extensions-menu.png" alt="Enable extensions in Rancher">
</div>
</div>
<div class="paragraph">
<p>Once you click on enable a dialogue box will pop up asking for confirmation and it will also notify you that the rancher extensions repository will be enabled, make sure it is checked and then confirm.</p>
</div>
</div>
<div class="sect2">
<h3 id="_1_2_install_suse_rancher_prime_os_manager_plugin"><a class="anchor" href="#_1_2_install_suse_rancher_prime_os_manager_plugin"></a>1.2 Install SUSE® Rancher Prime OS Manager Plugin</h3>
<div class="paragraph">
<p>After the extensions are enabled under the available tab you should see elemental plugin available for installation.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-extension-enabled.png" alt="SUSE® Rancher Prime OS Manager extension enabled">
</div>
</div>
<div class="paragraph">
<p>Click on Install, this will again ask for a confirmation. Click on Install again to continue. Once the installation is finished it will ask to reload the tab. Reload it by hitting reload, post reloading you should see the elemental plugin under the installed tab.</p>
</div>
</div>
<div class="sect2">
<h3 id="_1_3_install_the_elemental_operator_in_rancher_cluster"><a class="anchor" href="#_1_3_install_the_elemental_operator_in_rancher_cluster"></a>1.3 Install the elemental operator in Rancher cluster</h3>
<div class="paragraph">
<p>The next step is to install the elemental operator in Rancher Cluster. For that connect to the Rancher K8S cluster and enter the below command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">helm upgrade --create-namespace -n cattle-elemental-system --install elemental-operator-crds oci://registry.suse.com/rancher/elemental-operator-crds-chart
helm upgrade --create-namespace -n cattle-elemental-system --install elemental-operator oci://registry.suse.com/rancher/elemental-operator-chart</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-operator-install.png" alt="SUSE® Rancher Prime OS Manager operator install">
</div>
</div>
<div class="paragraph">
<p>Once the command is successful validate whether the the pod is running before continuing</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get pods -n cattle-elemental-system</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-operator-pod.png" alt="SUSE® Rancher Prime OS Manager operator pod">
</div>
</div>
<div class="paragraph">
<p>This will enable the "OS Management" sub menu under the "Global Apps" menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-osmanagement-menu.png" alt="OS Management menu">
</div>
</div>
<div class="paragraph">
<p>The OS Management dashboard at this point should have nothing in it.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-osmanagement-dashboard.png" alt="OS Management dashboard">
</div>
</div>
<div class="paragraph">
<p>At this point we are ready to proceed with the next step, that is to prepare the ISO.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_part_2_create_the_machine_registration_endpoint"><a class="anchor" href="#_part_2_create_the_machine_registration_endpoint"></a>Part 2: Create the Machine Registration Endpoint</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the OS Management dashboard hit the create registration endpoint button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-registration-endpoints.png" alt="OS Management registration endpoints">
</div>
</div>
<div class="paragraph">
<p>Now here either you can enter each detail in its respective places or you can edit this as yaml and create the endpoint in one go. Here we will edit this as yaml.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: elemental.cattle.io/v1beta1
kind: MachineRegistration
metadata:
  name: elemental-cls1
  namespace: fleet-default
spec:
  config:
    cloud-config:
      users:
        - name: root
          passwd: root
    elemental:
      install:
        reboot: true
        device: /dev/sda
        debug: true
      registration:
        emulate-tpm: true
        emulated-tpm-seed: 1
  machineName:
  machineInventoryLabels:
    manufacturer: "${System Information/Manufacturer}"
    productName: "${System Information/Product Name}"
    serialNumber: "${System Information/Serial Number}"
    machineUUID: "${System Information/UUID}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remove the existing content and enter this code snippet and click on save. Remember to modify this as per your need.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Main options</div>
<div class="paragraph">
<p>name: elemental-cls1 -&#8594; "Change this as per your need"</p>
</div>
<div class="paragraph">
<p>device: /dev/sda -&#8594; Make sure your target device is "sda" otherwise find out and change the naming convention here, for example in raspberry pi it could be "mmblk---"</p>
</div>
<div class="paragraph">
<p>emulate-tpm: true  -&#8594; Use this only if your target device doesnt have a tpm device and you have a way of emulating tpm like in VMware or KVM</p>
</div>
<div class="paragraph">
<p>emulated-tpm-seed: 1 -&#8594; increase this by 1 for every new machine. -&#8594; If this is not given each machine will recieve the same tpm hash so at any point in time regardless of how many machines you boot it wont show up under the machine inventory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Emulate TPM is only for non-production usage like for testing as it beats the purpose of security. So in production usage use the code above without the emulate-tpm and emulate-tpm-seed</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you create the machine registration end point it should show up as active.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-machine-registered.png" alt="Machine registered in Registration Endpoints">
</div>
</div>
<div class="paragraph">
<p>Next click on it to view the registration url and download the initial-registration yaml.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-initial-registration-url.png" alt="Initial registration URL">
</div>
</div>
<div class="paragraph">
<p>Hit the download button, this will download the "initial-registration.yaml" file on to your local system.</p>
</div>
<div class="paragraph">
<p>The registration yaml looks something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-initial-registration-url-yaml.png" alt="Example of initial registration YAML">
</div>
</div>
<div class="paragraph">
<p>We will use this file and inject its content into our vanilla elemental iso.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_part_3_create_the_iso"><a class="anchor" href="#_part_3_create_the_iso"></a>Part 3: Create the ISO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Make sure you have <code>initial-registration.yaml</code> in the system where you will create the iso in this we will use a Linux vm.</p>
</div>
<div class="paragraph">
<p>Create a directory to keep everything:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir /home/tux/elemental-demo &amp;&amp; cd /home/tux/elemental-demo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a file and copy the contents of the initial-registration.yaml in it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">vim initial-registration.yaml</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-initial-registration-yaml.png" alt="Create file with initial registration YAML">
</div>
</div>
<div class="paragraph">
<p>Next download the script to download the iso and inject the registration.yaml in the iso and make it executable</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">wget -q https://raw.githubusercontent.com/rancher/elemental/main/.github/elemental-iso-add-registration &amp;&amp; chmod +x elemental-iso-add-registration</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next execute the script and pass the initial-registration.yaml as an argument</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./elemental-iso-add-registration initial-registration.yaml</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-iso-create.png" alt="Create ISO with the initial registration options">
</div>
</div>
<div class="paragraph">
<p>This command will download the vanilla iso and inject it with the parameters of initial-registration.yaml and create a final iso for you to boot your end device.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you would like to download the vanilla ISO and reuse it later to create additional ISO&#8217;s, then you can download the iso separately using the below command and then pass the local file path as an argument to the script</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">wget https://download.opensuse.org/repositories/isv:/Rancher:/SUSE® Rancher Prime OS Manager:/Staging/containers/iso/sl-micro-6.0-baremetal.x86_64.iso

./elemental-iso-add-registration initial-registration.yaml /home/elemental-iso/sl-micro-6.0-baremetal.x86_64.iso</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_part_4_boot_the_target_device"><a class="anchor" href="#_part_4_boot_the_target_device"></a>Part 4: Boot the target device</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now ideally you would just burn the iso to a usb drive and boot your edge device using the usb device and once it boots and become active in Rancher under machine inventory you can select and create a cluster from it, however here we will use a vm to mimic an edge device for testing.</p>
</div>
<div class="sect2">
<h3 id="_4_1_prepare_the_vm_to_emulate_tpm"><a class="anchor" href="#_4_1_prepare_the_vm_to_emulate_tpm"></a>4.1 Prepare the VM to emulate TPM</h3>
<div class="paragraph">
<p>In VMware workstation create a vm the way you would do normally, make sure to give the HDD size at least 40 GB.</p>
</div>
<div class="paragraph">
<p>Now edit the machine settings and go to the "Options" tab. The very last option would be "Advanced".</p>
</div>
<div class="paragraph">
<p>Click on "advanced" and on the right window pane change the firmware type from "BIOS" to "UEFI" and check the "Enable secure boot" option as follow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Default settings with BIOS selected</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-vm-boot-bios.png" alt="VM boot options with BIOS">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Updated settings with UEFI selected and secure boot enabled</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-vm-boot-uefi.png" alt="VM boot options with UEFI">
</div>
</div>
<div class="paragraph">
<p>Now on the same "Options" tab click on the "Access Control" option and click on "Encrypt" on the right side.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-access-control-menu.png" alt="Access control menu">
</div>
</div>
<div class="paragraph">
<p>This will ask you to enter a password to encrypt the machine. Enter a password and click on "Encrypt"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-access-control-encrypt.png" alt="Access control encryption credentials">
</div>
</div>
<div class="paragraph">
<p>This is important to add the TPM Hardware. Next go back to the Hardware options and click on "Add"</p>
</div>
<div class="paragraph">
<p>And add the TPM (Trusted Platform Module) hardware and click on "Finish"</p>
</div>
<div class="paragraph">
<p>Now with the completion of this step our VM is ready.</p>
</div>
</div>
<div class="sect2">
<h3 id="_4_2_boot_the_vm_with_the_elemental_iso"><a class="anchor" href="#_4_2_boot_the_vm_with_the_elemental_iso"></a>4.2 Boot the VM with the elemental ISO</h3>
<div class="paragraph">
<p>Next add the ISO that we created earlier in the VM and boot it up.</p>
</div>
<div class="paragraph">
<p>It should boot up with the ISO and start installing SUSE® Rancher Prime OS Manager:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-install-grub.png" alt="SUSE® Rancher Prime OS Manager OS install grub menu">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-install-logs.png" alt="SUSE® Rancher Prime OS Manager OS install logs">
</div>
</div>
<div class="paragraph">
<p>And once it is complete it will reboot the VM and it should show up as active under the machine inventory in Rancher as follow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Machine inventory status while booting</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-machine-inventory-status-booting.png" alt="Machine inventory status during boot">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Machine inventory status after boot completed</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-machine-inventory-status-boot-complete.png" alt="Machine inventory status after boot complete">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_part_5_create_a_cluster_on_the_machine"><a class="anchor" href="#_part_5_create_a_cluster_on_the_machine"></a>Part 5: Create a cluster on the machine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the machine shows up as active, select it and hit "Create SUSE® Rancher Prime OS Manager Cluster".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-cluster-create.png" alt="Create SUSE® Rancher Prime OS Manager cluster">
</div>
</div>
<div class="paragraph">
<p>At this stage you get a pretty familiar page of creating a cluster in Rancher.</p>
</div>
<div class="paragraph">
<p>Give the cluster a name select the Kubernetes version and hit "Create".</p>
</div>
<div class="paragraph">
<p>For this we have selected to create a K3S cluster.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-cluster-template.png" alt="SUSE® Rancher Prime OS Manager cluster configuration">
</div>
</div>
<div class="paragraph">
<p>Now under the Cluster Management page the cluster should show up as creating:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-cluster-provisioning.png" alt="SUSE® Rancher Prime OS Manager cluster provisioning">
</div>
</div>
<div class="paragraph">
<p>And once the cluster is fully provisioned it should be active with provider type as "SUSE® Rancher Prime OS Manager".</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/rancher-vmware-elemental-cluster-created.png" alt="SUSE® Rancher Prime OS Manager cluster created">
</div>
</div>
<div class="paragraph">
<p>Now you can start deploying application on this cluster the normal way.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
<script src="../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../_/js/vendor/tabs.js"></script>


  </body>
</html>
