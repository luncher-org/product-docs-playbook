<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>资源分析 :: Rancher product documentation</title>
    <link rel="canonical" href="https://documentation.suse.com/cloudnative/k3s/latest/zh/reference/resource-profiling.html">
    <link rel="prev" href="flag-deprecation.html">
    <link rel="next" href="../release-notes/v1.32.X.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="stylesheet" href="../../../../_/css/search.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../../../_/css/font-styles.css">
<link rel="stylesheet" href="../../../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../../../_/css/site-extra.css">
<link rel="stylesheet" href="../../../../_/css/vendor/tabs.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
href="https://fonts.googleapis.com/css2?family=SUSE:wght@100..800&display=swap" rel="stylesheet">
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../../../_/css/vendor/light.css">
<!-- <script src="/docserv/res/lightheaded/analytics.js"
        type="text/javascript"></script> -->
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs'; mermaid.initialize({"startOnLoad":true});</script><header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a class=" navbar-logo" href="https://documentation.suse.com/" aria-label="SUSE Documentation Home"><img class="logo"
            src="../../../../_/img/logo.svg" alt="SUSE logo"/></a>
      </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <label class="visual-search-label" for="search-input">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
          <input label="Search" aria-label="Search" id="search-input" type="text" placeholder="Search the docs" >
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">
            <img src="../../../../_/img/resources.png" class="langIcon Resurces" alt="Resources" title="Resources">
          </div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://github.com/rancher/k3s-product-docs"><i class="fab fa-github"></i>&nbsp;K3s</a>
            <div class="has-submenu">
              <a class="navbar-item" href="#" ><i class="fas fa-file-alt"></i>&nbsp;Report Issue &nbsp;<i class="fas fa-chevron-right"></i></a>
              <div class="submenu">
                <a class="navbar-item" href="https://scc.suse.com">SCC (Recommended)</a>
                <a class="navbar-item" href="https://github.com/rancher/k3s-product-docs/issues">GitHub Issue</a>
              </div>
            </div>
            <a class="navbar-item" href="https://github.com/rancher/product-docs-playbook/blob/main/CONTRIBUTING.md"><i class="fas fa-user-edit"></i>&nbsp;Contribute</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link"><img src="../../../../_/img/language.png" class="langIcon Language" alt="Language"
              title="Language"></div>
          <div class="navbar-dropdown">
            <!--  </div><div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
              <a role="button" class="navbar-item" id="en" onclick="selectLanguage(this.id)">
                <!--<img src="../../../../_/img/engFlag.svg" class="langIcon english">-->
                &nbsp;English
              </a>
              <a role="button" class="navbar-item" id="zh" onclick="selectLanguage(this.id)">
                <!--<img src="../../../../_/img/china.svg" class="langIcon china">-->
                &nbsp;中文
              </a>
              <a role="button" class="navbar-item" id="ko" onclick="selectLanguage(this.id)">
                <!--<img src="../../../../_/img/koFlag.svg" class="langIcon korea">-->
                &nbsp;한국어
              </a>
              <a role="button" class="navbar-item" id="ja" onclick="selectLanguage(this.id)">
                <!--<img src="../../../../_/img/jaFlag.svg" class="langIcon japan">-->
                &nbsp;日本語
              </a>
            <!-- LANGUAGESELECTOR -->
          </div>
        </div>
        <!--
        <div class="navbar-item">
          <a href="https://twitter.com/SUSE">
            <img alt="X-logo" class="x-logo" src="../../../../_/img/x-logo-white.png">
          </a>
        </div>
        -->
      </div>
    </div>

    <!--   <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div> -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="k3s" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../../en/introduction.html">K3s</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../introduction.html">K3s - 轻量级 Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../quick-start.html">快速入门指南</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../installation/installation.html">安装</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/requirements.html">Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/configuration.html">Configuration Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/private-registry.html">Private Registry Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/registry-mirror.html">Embedded Registry Mirror</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/airgap.html">Air-Gap Install</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/server-roles.html">Managing Server Roles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/packaged-components.html">Managing Packaged Components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installation/uninstall.html">Uninstalling K3s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../datastore/datastore.html">集群数据存储</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../datastore/backup-restore.html">备份和恢复</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../datastore/ha-embedded.html">高可用嵌入式 etcd</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../datastore/ha.html">高可用外部数据库</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../datastore/cluster-loadbalancer.html">Cluster Load Balancer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../upgrades/upgrades.html">升级</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/killall.html">停止 K3s</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/manual.html">手动升级</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrades/automated.html">自动升级</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../security/security.html">安全</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/secrets-encryption.html">Secret 加密配置</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/hardening-guide.html">CIS Hardening Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/self-assessment-1.8.html">CIS 1.8 Self Assessment Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/self-assessment-1.7.html">CIS 1.7 Self Assessment Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../security/self-assessment-1.24.html">CIS 1.24 Self Assessment Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../cli/cli.html">CLI 工具</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/server.html">server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/agent.html">agent</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/certificate.html">certificate</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/etcd-snapshot.html">etcd-snapshot</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/secrets-encrypt.html">secrets-encrypt</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cli/token.html">token</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../architecture.html">架构</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cluster-access.html">集群访问</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../storage.html">卷和存储</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <a class="nav-link" href="../networking/networking.html">Networking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/basic-network-options.html">Basic Network Options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/distributed-multicloud.html">Distributed hybrid or multicloud cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/multus-ipams.html">Multus and IPAM plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../networking/networking-services.html">网络</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../helm.html">Helm</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../advanced.html">高级选项和配置</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">参考</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="env-variables.html">环境变量</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="flag-deprecation.html">Flag Deprecation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="resource-profiling.html">资源分析</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle" aria-label="Toggle expand/collapse"></button>
    <span class="nav-text">Release Notes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.32.X.html">v1.32.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.31.X.html">v1.31.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.30.X.html">v1.30.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.29.X.html">v1.29.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.28.X.html">v1.28.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.27.X.html">v1.27.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.26.X.html">v1.26.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.25.X.html">v1.25.X</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-notes/v1.24.X.html">v1.24.X</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../related-projects.html">Related Projects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../known-issues.html">已知问题</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../faq.html">常见问题</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">K3s</span>
    <span class="version">Latest</span>
  </div>
  <ul class="components">
        <li class="component">
          <div class="title"><a href="../../../../cluster-api/v0.16/en/index.html">Cluster API</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../cluster-api/v0.16/en/index.html">0.16</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.15/en/index.html">0.15</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.14/en/index.html">0.14</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.13/en/index.html">0.13</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.12/en/index.html">0.12</a>
            </li>
            <li class="version">
              <a href="../../../../cluster-api/v0.11/en/index.html">0.11</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../continuous-delivery/v0.11/en/index.html">Continuous Delivery</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../continuous-delivery/v0.11/en/index.html">0.11</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.10/en/index.html">0.10</a>
            </li>
            <li class="version">
              <a href="../../../../continuous-delivery/v0.9/en/index.html">0.9</a>
            </li>
          </ul>
        </li>
        <li class="component is-current">
          <div class="title"><a href="../../en/introduction.html">K3s</a></div>
          <ul class="versions">
            <li class="version is-current is-latest">
              <a href="../../en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../os-manager/1.6/en/index.html">OS Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../os-manager/1.6/en/index.html">1.6</a>
            </li>
            <li class="version">
              <a href="../../../../os-manager/1.5/en/index.html">1.5</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../policy-manager/1.22/en/introduction.html">Policy Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../policy-manager/1.22/en/introduction.html">1.22-next</a>
            </li>
            <li class="version">
              <a href="../../../../policy-manager/1.21/en/introduction.html">1.21</a>
            </li>
            <li class="version">
              <a href="../../../../policy-manager/1.20/en/introduction.html">1.20</a>
            </li>
            <li class="version">
              <a href="../../../../policy-manager/1.19/en/introduction.html">1.19</a>
            </li>
            <li class="version">
              <a href="../../../../policy-manager/1.18/en/introduction.html">1.18</a>
            </li>
            <li class="version">
              <a href="../../../../policy-manager/1.17/en/introduction.html">1.17</a>
            </li>
            <li class="version">
              <a href="../../../../policy-manager/1.16/en/introduction.html">1.16</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rke2/latest/en/introduction.html">RKE2</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rke2/latest/en/introduction.html">Latest</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">SUSE® Rancher Manager</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html">Latest</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.10/en/about-rancher/what-is-rancher.html">v2.10</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.9/en/about-rancher/what-is-rancher.html">v2.9</a>
            </li>
            <li class="version">
              <a href="../../../../rancher-manager/v2.8/en/about-rancher/what-is-rancher.html">v2.8</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../security/5.4/en/overview.html">SUSE® Security</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../security/5.4/en/overview.html">5.4</a>
            </li>
            <li class="version">
              <a href="../../../../security/5.3/en/overview.html">5.3</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../storage/1.9.0/en/longhorn-documentation.html">SUSE® Storage</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../storage/1.9.0/en/longhorn-documentation.html">1.9.0 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.8.0/en/longhorn-documentation.html">1.8.0 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../storage/1.7.0/en/longhorn-documentation.html">1.7.0</a>
            </li>
          </ul>
        </li>
        <li class="component">
          <div class="title"><a href="../../../../virtualization/v1.5/en/introduction/overview.html">SUSE® Virtualization</a></div>
          <ul class="versions">
            <li class="version is-latest">
              <a href="../../../../virtualization/v1.5/en/introduction/overview.html">v1.5 (Dev)</a>
            </li>
            <li class="version">
              <a href="../../../../virtualization/v1.4/en/introduction/overview.html">v1.4 (Latest)</a>
            </li>
            <li class="version">
              <a href="../../../../virtualization/v1.3/en/introduction/overview.html">v1.3</a>
            </li>
          </ul>
        </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../rancher-manager/latest/en/about-rancher/what-is-rancher.html" aria-label="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../en/introduction.html">K3s</a></li>
    <li>参考</li>
    <li><a href="resource-profiling.html">资源分析</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/rancher/k3s-product-docs/edit/main/versions/latest/modules/zh/pages/reference/resource-profiling.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">资源分析</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>本文介绍了测试结果，用于确定 K3s 的最低资源要求。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_minimum_resource_requirements_for_k3s"><a class="anchor" href="#_minimum_resource_requirements_for_k3s"></a>Minimum Resource Requirements for K3s</h2>
<div class="sectionbody">
<div class="paragraph">
<p>结果总结如下：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">组件</th>
<th class="tableblock halign-left valign-top">处理器</th>
<th class="tableblock halign-left valign-top">最小 CPU</th>
<th class="tableblock halign-left valign-top">Kine/SQLite 的最小 RAM</th>
<th class="tableblock halign-left valign-top">嵌入式 etcd 的最小 RAM</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">具有工作负载的 K3s Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C CPU, 2.90 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 6%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1596M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1606M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">具有单个 Agent 的 K3s 集群</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C CPU, 2.90 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 5%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1428M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1450M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K3s agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C CPU, 2.90 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 3%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">275M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">275M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">具有工作负载的 K3s Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B BCM2711, 1.50 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 30%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1588M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1613M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">具有单个 Agent 的 K3s 集群</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B BCM2711, 1.50 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 25%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1215M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1413M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K3s agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B BCM2711, 1.50 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 10%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">268M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">268M</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_资源测试范围"><a class="anchor" href="#_资源测试范围"></a>资源测试范围</h3>
<div class="paragraph">
<p>资源测试旨在解决以下问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>在单节点集群上，确定要为整个 K3s 服务器堆栈预留的最小 CPU、内存和 IOP 数量（假设集群上将部署真实的工作负载）。</p>
</li>
<li>
<p>在 Agent（Worker）节点上，确定要为 Kubernetes 和 K3s control plane 组件（kubelet 和 k3s agent）预留的最小 CPU、内存和 IOP 数量。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_用于基线测量的组件"><a class="anchor" href="#_用于基线测量的组件"></a>用于基线测量的组件</h3>
<div class="paragraph">
<p>测试的组件包括：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>启用所有打包组件的 K3s 1.26.5</p>
</li>
<li>
<p>Prometheus + Grafana 监控栈</p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/tasks/run-application/run-stateless-application-deployment/">Kubernetes 示例 Nginx 部署</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这些是一个稳定系统的基线数据，只使用 K3s 打包的组件（Traefik Ingress、Klipper lb、本地路径存储），运行标准的监控堆栈（Prometheus 和 Grafana）和 Guestbook 示例应用程序。</p>
</div>
<div class="paragraph">
<p>包括 IOPS 在内的资源数据仅用于 Kubernetes 数据存储和 control plane，不包括系统级 management agent 或 logging、容器镜像管理或任何工作负载要求的开销。</p>
</div>
</div>
<div class="sect2">
<h3 id="_方法"><a class="anchor" href="#_方法"></a>方法</h3>
<div class="paragraph">
<p>Prometheus v2.43.0 的独立实例可以通过 apt 安装的 <code>prometheus-node-exporter</code> 收集主机 CPU、内存和磁盘 IO 统计信息。</p>
</div>
<div class="paragraph">
<p><code>systemd-cgtop</code> 用于抽查 systemd cgroup 级别的 CPU 和内存利用率。<code>system.slice/k3s.service</code> 跟踪 K3s 和 containerd 的资源利用率，而单个 pod 位于 <code>kubepods</code> 层级下。</p>
</div>
<div class="paragraph">
<p>其他详细的 K3s 内存利用率数据是使用 server 和 agent 进程的集成 metrics-server 从 <code>kubectl top node</code> 收集的。</p>
</div>
<div class="paragraph">
<p>利用率数据来自于运行所述工作负载的节点上稳态运行的第 95 个百分位读数。</p>
</div>
</div>
<div class="sect2">
<h3 id="_环境"><a class="anchor" href="#_环境"></a>环境</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Arch</th>
<th class="tableblock halign-left valign-top">OS</th>
<th class="tableblock halign-left valign-top">System</th>
<th class="tableblock halign-left valign-top">CPU</th>
<th class="tableblock halign-left valign-top">RAM</th>
<th class="tableblock halign-left valign-top">Disk</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">x86_64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ubuntu 22.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AWS c6id.xlarge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel Xeon Platinum 8375C CPU, 4 Core 2.90 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NVME SSD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">aarch64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raspberry Pi OS 11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raspberry Pi 4 Model B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCM2711, 4 Core 1.50 GHz</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UHS-III SDXC</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_基准资源要求"><a class="anchor" href="#_基准资源要求"></a>基准资源要求</h3>
<div class="paragraph">
<p>本文介绍了测试结果，用于确定基本 K3s 操作的最低资源要求。</p>
</div>
<div class="sect3">
<h4 id="_具有工作负载的_k3s_server"><a class="anchor" href="#_具有工作负载的_k3s_server"></a>具有工作负载的 K3s Server</h4>
<div class="paragraph">
<p>这些是单节点集群的要求，其中 K3s Server 与<a href="https://kubernetes.io/docs/tasks/run-application/run-stateless-application-deployment/">简单工作负载</a>共享资源。</p>
</div>
<div class="paragraph">
<p>CPU 要求：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">系统</th>
<th class="tableblock halign-left valign-top">CPU 核用量</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 6%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 30%</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>内存要求：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">测试的数据存储</th>
<th class="tableblock halign-left valign-top">系统</th>
<th class="tableblock halign-left valign-top">内存</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kine/SQLite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1596M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1588M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">嵌入式 etcd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1606M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1613M</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>磁盘要求：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">测试的数据存储</th>
<th class="tableblock halign-left valign-top">IOPS</th>
<th class="tableblock halign-left valign-top">KiB/sec</th>
<th class="tableblock halign-left valign-top">延迟</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kine/SQLite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; 10 ms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">嵌入式 etcd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">250</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; 5 ms</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_具有单个_agent_的_k3s_集群"><a class="anchor" href="#_具有单个_agent_的_k3s_集群"></a>具有单个 Agent 的 K3s 集群</h4>
<div class="paragraph">
<p>以下介绍具有 K3s Server 节点和 K3s Agent，但没有工作负载的 K3s 集群的基线要求。</p>
</div>
<div class="sect4">
<h5 id="_k3s_server"><a class="anchor" href="#_k3s_server"></a>K3s Server</h5>
<div class="paragraph">
<p>CPU 要求：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">系统</th>
<th class="tableblock halign-left valign-top">CPU 核用量</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 5%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 25%</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>内存要求：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">测试的数据存储</th>
<th class="tableblock halign-left valign-top">系统</th>
<th class="tableblock halign-left valign-top">内存</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kine/SQLite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1428M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1215M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">嵌入式 etcd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1450M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1413M</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_k3s_agent"><a class="anchor" href="#_k3s_agent"></a>K3s Agent</h4>
<div class="paragraph">
<p>要求：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">系统</th>
<th class="tableblock halign-left valign-top">CPU 核用量</th>
<th class="tableblock halign-left valign-top">RAM</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel 8375C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 3%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">275M</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pi4B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">核的 5%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">268M</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_分析主要资源使用率决定因素"><a class="anchor" href="#_分析主要资源使用率决定因素"></a>分析主要资源使用率决定因素</h3>
<div class="paragraph">
<p>K3s Server 利用率数据主要取决于 Kubernetes 数据存储（kine 或 etcd）、API Server、Controller-Manager 和 Scheduler 控制循环的支持，以及影响系统状态更改的任何管理任务。如果对 Kubernetes control plane 添加额外负载（例如创建/修改/删除资源），利用率会出现临时峰值。如果使用大量使用 Kubernetes 数据存储的 Operator 或应用程序（例如 Rancher 或其他 Operator 类型的应用程序），server 的资源需求将增加。如果通过添加额外的节点或创建大量集群资源来扩展集群，server 的资源需求将增加。</p>
</div>
<div class="paragraph">
<p>K3s Agent 利用率数据主要取决于容器生命周期管理控制循环的支持。如果存在涉及管理镜像、配置存储或创建/销毁容器的操作，利用率会出现临时峰值。尤其是镜像拉取（通常与 CPU 和 IO 高度绑定），因为涉及将镜像内容解压缩到磁盘。如果可能，你可以将工作负载存储（pod 临时存储和卷）与 Agent 组件（/var/lib/rancher/k3s/agent）隔离，从而确保没有资源冲突。</p>
</div>
</div>
<div class="sect2">
<h3 id="_防止_agent_和工作负载干扰集群数据存储"><a class="anchor" href="#_防止_agent_和工作负载干扰集群数据存储"></a>防止 Agent 和工作负载干扰集群数据存储</h3>
<div class="paragraph">
<p>如果在 server 还托管了工作负载 pod 的环境中运行，你需要确保 agent 和工作负载 IOPS 不会干扰数据存储。</p>
</div>
<div class="paragraph">
<p>你可以将 server 组件 (/var/lib/rancher/k3s/server) 放置在与 agent 组件 (/var/lib/rancher/k3s/agent) 不同的存储介质，其中包括 containerd 镜像存储区。</p>
</div>
<div class="paragraph">
<p>工作负载存储（pod 临时存储和卷）也应该与数据存储区隔离。</p>
</div>
<div class="paragraph">
<p>如果未能满足数据存储吞吐量和延迟要求，control plane 的响应可能会延迟，control plane 也可能无法维持系统状态。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_server_sizing_requirements_for_k3s"><a class="anchor" href="#_server_sizing_requirements_for_k3s"></a>Server Sizing Requirements for K3s</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_environment"><a class="anchor" href="#_environment"></a>Environment</h3>
<div class="ulist">
<ul>
<li>
<p>All agents were t3.medium AWS ec2 instances.</p>
<div class="ulist">
<ul>
<li>
<p>A single agent was a c5.4xlarge instance. This hosted the grafana monitoring stack and prevented it from interfering with the control-plane resources.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The Server was a c5 AWS ec2 instance. As the number of agents increased, the server was upgraded to larger c5 instances.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_methodology"><a class="anchor" href="#_methodology"></a>Methodology</h3>
<div class="paragraph">
<p>This data was retrieved under specific test conditions. It will vary depending upon environment and workloads. The steps below give an overview of the test that was run to retrieve this. It was last performed on v1.31.0+k3s1. All the machines were provisioned in AWS with standard 20 GiB gp3 volumes. The test was run with the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Monitor resources on grafana using prometheus data source.</p>
</li>
<li>
<p>Deploy workloads in such a way to simulate continuous cluster activity:</p>
<div class="ulist">
<ul>
<li>
<p>A basic workload that scales up and down continuously</p>
</li>
<li>
<p>A workload that is deleted and recreated in a loop</p>
</li>
<li>
<p>A constant workload that contains multiple other resources including CRDs.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Join agent nodes in batches of 50-100 at a time.</p>
</li>
<li>
<p>Stop adding agents when server CPU spikes above 90% utilization on agent joining, or if RAM was above 80% utilization.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_observations"><a class="anchor" href="#_observations"></a>Observations</h3>
<div class="ulist">
<ul>
<li>
<p>When joining agents, server CPU saw spikes of ~20% over baseline.</p>
</li>
<li>
<p>Typically, the limiting factor was CPU, not RAM. For most of the tests, when the CPU hit 90% utilization, RAM utilization was around 60%.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_a_note_on_high_availability_ha"><a class="anchor" href="#_a_note_on_high_availability_ha"></a>A note on High Availability (HA)</h4>
<div class="paragraph">
<p>At the end of each test, two additional servers were joined (forming a basic 3 node HA cluster) to observe what effect this had on the original server resources. The effect was:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A noticeable drop in CPU utilization, usually 30-50%.</p>
</li>
<li>
<p>RAM utilization remained the same.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While not tested, with CPU utilization as the limiting factor on a single server, it is expected that the number of agents that can be joined would increase by ~50% with a 3 node HA cluster.</p>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="flag-deprecation.html">Flag Deprecation</a></span>
  <span class="next"><a href="../release-notes/v1.32.X.html">v1.32.X</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/vendor/lunr-languages.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script src="../../../../_/js/vendor/langSelection.js"></script>
<script async src="../../../../_/js/vendor/tabs.js"></script>


  </body>
</html>
